## hash
case 文で書けそうなもの(特定の値を返す場合)を hash で書いて判定させることができる。
hash に key を与えると value が返ってくるため。

## symbol
文字列を symbol に変換したいときは `to_sym` で変換できる。
symbolは識別子（ID）である。

## yield
```ruby
def output 
  yield * 10
end
```
```ruby
x = 1
output { x - 10 }
-> -90
```
yieldには渡されたブロックが突っ込まれている

## アロー演算子
```ruby
lookup -> (artists) do
  artists.select do |artist|
    album_artists[artist]
  end
end
```
これが無名関数の定義の仕方

```ruby
artists = %w["a" "b" "c"]
lookup[artists]
```
無名関数を使う時はこのように使う

## イテレーター
```ruby
10.times.flat_map do |i|
  p i
end
```
timesのブロックパラメーターには0からself-1の値が渡される  
flat_mapはブロックに渡した要素を連結して配列にして返す  
なので上記は
```ruby
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```
が返る

## アクティブレコード
データの取得・保存処理とドメインロジックを合わせてカプセル化するアーキテクチャーパターン。
データベースのテーブルをクラス、レコードをクラスのインスタンス、カラムをインスタンスの属性に対応させる。
アクティブレコードを実装したクラスでは、SQLの実行結果からクラスのインスタンスを構築し、インスタンスメソッドを介して特定のレコードを操作する。

## 値オブジェクト
値が同じであればアプリケーション上は同じものとして扱って良いオブジェクトのこと。  
Railsにはモデルの属性を値オブジェクトとして表現するための仕組みが用意されている。

```ruby
class User < ApplicationRecord
  composed_of :phone_number, mapping: %w[phone_number value]
end
```
第一引数にはモデルの属性名、第二引数には値オブジェクトの属性名を指定する。

## サービスオブジェクト
複数のオブジェクトを組み合わせて表現するロジックのように不自然なドメインロジックを独立したオブジェクトとして定義したもの。
サービスオブジェクトはモデルとは異なり、自身の動作を変更するような状態を持たない。  
モデルに実装すべきロジックまで実装しないようにする。  
対応するイベントがを見落としていないかを確認する。

- サービスオブジェクトを実装するクラスの名前は、ある1つのドメインロジックを指すものにすると良い。
- ロジックを実行するためのクラスメソッドを1つだけ公開するようにする。
- クラスの外からはインスタンスを生成できないようにすることで、サービスオブジェクトに状態を持たせないようにできる。
